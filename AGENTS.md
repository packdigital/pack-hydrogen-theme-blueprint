# AGENTS.md

## Cursor Cloud specific instructions

### Overview

This is **Pack Blueprint** â€” a Shopify Hydrogen storefront theme (React/TypeScript/Vite) by Pack Digital. It is a single-package application (not a monorepo). All product/content data comes from external APIs (Shopify Storefront API and Pack CMS); there are no local databases.

### Node version

The project requires **Node.js v20** (see `.nvmrc`). Use `nvm use` to activate the correct version.

### Package manager

Uses **npm** (see `package-lock.json`). Run `npm install` for dependencies.

### Common commands

See `package.json` scripts:

| Command | Purpose |
|---------|---------|
| `npm run dev` | Start dev server on port 8080 (Shopify Mini-Oxygen) |
| `npm run build` | Production build via `shopify hydrogen build` |
| `npm run lint` | ESLint check |
| `npm run format:check` | Prettier check |
| `npm run typecheck` | TypeScript type check (`tsc --noEmit`) |

### Environment variables

A `.env` file is required at the project root. Minimal config for local dev with mock data:

```
SESSION_SECRET="foobar"
PUBLIC_STORE_DOMAIN="mock.shop"
PUBLIC_STOREFRONT_API_TOKEN="foobar"
PACK_PUBLIC_TOKEN="<real or placeholder>"
PACK_SECRET_TOKEN="<real or placeholder>"
PACK_STOREFRONT_ID="<real or placeholder>"
```

With placeholder Pack tokens, the server starts and the Shopify Storefront API works (search, products, cart, etc.), but Pack CMS content (homepage sections, page builder) will return errors. This is expected behavior without real Pack credentials.

### Gotchas

- **`typecheck` has pre-existing errors**: The `+types/*` modules are auto-generated by React Router during the Vite build, not at rest. Running `tsc --noEmit` standalone will report missing module errors for route type imports. This is a known pattern with React Router v7 file-based routing. The build (`npm run build`) succeeds despite these.
- **`lint` has pre-existing errors**: ~25 ESLint errors and ~4 warnings exist in the codebase (empty blocks, prettier formatting). These are not introduced by setup.
- **React Router version warning**: The Hydrogen CLI warns about a React Router version mismatch (installed 7.12.0 vs expected 7.9.2). The app works correctly despite this warning.
- **Pack CMS is a hard dependency for full content**: The `server.ts` throws if `PACK_SECRET_TOKEN` is missing. With a placeholder token, the server runs but Pack CMS API calls return "Unauthorized". The Shopify Storefront API features (products, search, cart) still work via `mock.shop`.
- **Dev server port**: The dev server runs on **port 8080** (configured in `package.json` dev script).
